<h1>Hello, welkom bij {{ title }}, {{ fullName }}</h1>

<form [formGroup]="signUpForm" (ngSubmit)="submitForm()" class="max-w-sm mx-auto">
    <div class="mb-5">
        <label for="firstName" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">First name</label>
        <input (keyup)="updateFullName()" type="text" id="firstName" formControlName="firstName" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" />
        @if (f.firstName.invalid && (f.firstName.dirty || f.firstName.touched)) {
            <p class="mt-2 text-sm text-red-600 dark:text-red-500">First name is required.</p>
        }
    </div>
    <div class="mb-5">
        <label for="lastName" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Last name</label>
        <input (keyup)="updateFullName()" type="text" id="lastName" formControlName="lastName" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" />
        @if (f.lastName.invalid && (f.lastName.dirty || f.lastName.touched)) {
            <p class="mt-2 text-sm text-red-600 dark:text-red-500">Last name is required.</p>
        }
    </div>
    <div class="mb-5">
        <label for="email" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Email</label>
        <input type="email" id="email" formControlName="email" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" />
        @if (f.email.invalid && (f.email.dirty || f.email.touched)) {
            @if (f.email.errors?.['required']) {
                <p class="mt-2 text-sm text-red-600 dark:text-red-500">Email is required.</p>
            }
            @if (f.email.errors?.['pattern']) {
                <p class="mt-2 text-sm text-red-600 dark:text-red-500">Email is not valid.</p>
            }
        }
    </div>
    <div class="mb-5">
        <label for="password" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Password</label>
        <input type="password" id="password" formControlName="password" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" />
        @if (f.password.invalid && (f.password.dirty || f.password.touched)) {
            @if (f.password.errors?.['required']) {
                <p class="mt-2 text-sm text-red-600 dark:text-red-500">Password is required.</p>
            }
            @if (f.password.errors?.['minlength']) {
                <p class="mt-2 text-sm text-red-600 dark:text-red-500">Password must have be at least 8 characters long.</p>
            }
            @if (f.password.errors?.['pattern']) {
                <p class="mt-2 text-sm text-red-600 dark:text-red-500">Password must contain at least 1 lowercase and 1 uppercase letter.</p>
            }
            @if (f.password.errors?.['uniquePassword']) {
                <p class="mt-2 text-sm text-red-600 dark:text-red-500">Password can not be the same as first name or last name.</p>
            }
        }
    </div>
    <button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center">Submit</button>
</form>

@if(showSuccessModal) {
  <app-success-modal
    [result]="apiResult"
    (modalClosed)="modalClosed()"
  ></app-success-modal>
}
